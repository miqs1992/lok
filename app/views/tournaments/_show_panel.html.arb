# frozen_string_literal: true

div.panel('Tournament Details') do
  attributes_table_for resource do
    row :name
    row :tournament_type
    row :start_date
  end
end

div.panel('Teams') do
  resource.teams.includes(players: :shields).order(:name).each_slice(2) do |teams|
    columns do
      teams.each do |team|
        column do
          panel link_to(team.name, tournament_team_path(team)) do
            attributes_table_for team do
              row :points
            end
            table_for team.players do
              column :name
              column :points
              column('Shields') { |p| p.shields.size }
              column('Edit') { |p| link_to 'Edit', edit_player_path(p) }
            end
          end
        end
      end
    end
  end
end
